name: Sync GitHub to Notion

on:
  issues:
    types: [opened, edited]

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Create Notion Page
        run: |
          curl -X POST https://api.notion.com/v1/pages \
            -H "Authorization: Bearer ${{ secrets.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 }}" \
            -H "Content-Type: application/json" \
            -H "Notion-Version: 2022-06-28" \
            -d '{
              "parent": {
                "database_id": "${{ secrets.NOTION_DB_ID }}"
              },
              "properties": {
                "Title": {
                  "title": [{"text": {"content": "${{ github.event.issue.title }}"}}]
                },
                "GitHub URL": {
                  "url": "${{ github.event.issue.html_url }}"
                },
                "Status": {
                  "select": {"name": "Open"}
                }
              }
            }'

