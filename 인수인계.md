# í”„ë¡œì íŠ¸ ì¸ìˆ˜ì¸ê³„ ë¬¸ì„œ

## í”„ë¡œì íŠ¸ ê°œìš”
- **í”„ë¡œì íŠ¸ëª…**: hahahahgo (í„´ì œ ì¹´ë“œ ë°°í‹€ ê²Œì„)
- **ê²½ë¡œ**: `Z:\ë°”ì´ë¸Œì½”ë”©\memory bank\hahahahgo`
- **ê¸°ìˆ  ìŠ¤íƒ**: React, Zustand (ìƒíƒœê´€ë¦¬), Vite
- **í˜„ì¬ ë¸Œëœì¹˜**: `claude/check-responsiveness-01WbgS136iR7Qv8ZmsANG367`
- **ìµœì‹  ì»¤ë°‹**: `7ffcd9ebf7befa97cdb946b013b5b1940abb580d`

---

## ìµœê·¼ ì™„ë£Œëœ ì‘ì—…

### 1. íƒ€ì„ë¼ì¸ ì†ë„ ìµœì í™” (ì»¤ë°‹ë¨)

ì‚¬ìš©ì ìš”ì²­: "ìŠ¤í”¼ë“œí•œ ê²Œì„ê°ì„ ì›í•´" - íƒ€ì„ë¼ì¸ ì¹´ë“œ ì§„í–‰ì´ ë„ˆë¬´ ëŠë¦¼

**ìµœì í™” ê²°ê³¼: ì „ì²´ 55% ì†ë„ í–¥ìƒ**

#### ë³€ê²½ëœ íŒŒì¼ ë° ê°’

**`src/components/battle/LegacyBattleApp.jsx`**

| ìœ„ì¹˜ (ë¼ì¸) | í•­ëª© | ì´ì „ ê°’ | í˜„ì¬ ê°’ | ì„¤ëª… |
|-------------|------|---------|---------|------|
| ~1584 | ìë™ì§„í–‰ ë”œë ˆì´ | 1000ms | **450ms** | useEffect íƒ€ì´ë¨¸, ë‹¤ìŒ ì¹´ë“œë¡œ ë„˜ì–´ê°€ëŠ” ëŒ€ê¸° ì‹œê°„ |
| ~1592 | ì—í…Œë¥´ ê³„ì‚° ì• ë‹ˆë©”ì´ì…˜ | 900ms | **400ms** | í„´ ì¢…ë£Œ í›„ ì—í…Œë¥´ ì •ì‚° ì‹œì‘ ë”œë ˆì´ |
| ~1431 | ì¹´ë“œ ì‹¤í–‰ ë©”ì¸ ë”œë ˆì´ | 500ms | **250ms** | stepOnce ë‚´ setTimeout, ì‹œê³—ë°”ëŠ˜ ì´ë™ í›„ ì¹´ë“œ ë°œë™ |
| ~1400 | ì¹´ë“œ í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜ | 350ms | **200ms** | ì¹´ë“œ ì‹¤í–‰ ì¤‘ í”ë“¤ë¦¼ íš¨ê³¼ ì§€ì† ì‹œê°„ |
| ~1406 | ë§ˆì§€ë§‰ ì¹´ë“œ í˜ì´ë“œì•„ì›ƒ | 300ms | **150ms** | íƒ€ì„ë¼ì¸ ì¸ë””ì¼€ì´í„° ìˆ¨ê¹€ íƒ€ì´ë° |
| ~1423 | ì¹´ë“œ ì†Œë©¸ ì‹œì‘ ë”œë ˆì´ | 300ms | **150ms** | í”Œë ˆì´ì–´ ì¹´ë“œ ì‚¬ë¼ì§€ê¸° ì‹œì‘ |
| ~1426 | ì¹´ë“œ ì†Œë©¸ ì§€ì† ì‹œê°„ | 600ms | **300ms** | ì¹´ë“œ ì™„ì „íˆ ì‚¬ë¼ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ |

**`src/components/battle/ui/TimelineDisplay.jsx`**

| ìœ„ì¹˜ (ë¼ì¸ 90) | í•­ëª© | ì´ì „ ê°’ | í˜„ì¬ ê°’ | ì„¤ëª… |
|----------------|------|---------|---------|------|
| transition | ì‹œê³—ë°”ëŠ˜ ì´ë™ ì†ë„ | 0.5s | **0.25s** | CSS transition, ì¹´ë“œ ì‹¤í–‰ê³¼ ë™ê¸°í™” í•„ìˆ˜ |

#### íƒ€ì´ë° ë™ê¸°í™” ì›ë¦¬
```
ì‹œê³—ë°”ëŠ˜ ì´ë™ (0.25s) â†’ ì¹´ë“œ ë°œë™ ëŒ€ê¸° (250ms) â†’ í”ë“¤ë¦¼ (200ms) â†’ ë‹¤ìŒ ì¹´ë“œ (450ms)
```
- ì‹œê³—ë°”ëŠ˜ transition(0.25s)ê³¼ ì¹´ë“œ ë°œë™ ë”œë ˆì´(250ms)ê°€ ì¼ì¹˜í•´ì•¼ "ì‹œê³—ë°”ëŠ˜ì´ ì¹´ë“œì— ë„ë‹¬í•˜ë©´ ë°œë™"ë˜ëŠ” ëŠë‚Œ
- ìë™ì§„í–‰ ë”œë ˆì´(450ms)ëŠ” ë°˜ë“œì‹œ stepOnce ì´ ì‹¤í–‰ ì‹œê°„(250ms + 200ms = 450ms)ë³´ë‹¤ ê¸¸ê±°ë‚˜ ê°™ì•„ì•¼ í•¨

#### ì¤‘ìš” ë²„ê·¸ íˆìŠ¤í† ë¦¬
ìë™ì§„í–‰ ë”œë ˆì´ë¥¼ 400msë¡œ ì„¤ì •í–ˆì„ ë•Œ ë°œìƒí•œ ë²„ê·¸:
- **ì¦ìƒ**: "íƒ€ì„ë¼ì¸ì—ì„œëŠ” í”Œë ˆì´ì–´ ì¹´ë“œë§Œ ë°œë™ë˜ëŠ”ë° ì‹¤ì œë¡œëŠ” ëª¬ìŠ¤í„° ì¹´ë“œë§Œ ì‹¤í–‰ë¨"
- **ì›ì¸**: stepOnce ì‹¤í–‰(500ms)ì´ ì™„ë£Œë˜ê¸° ì „ì— ë‹¤ìŒ stepOnce í˜¸ì¶œ
- **í•´ê²°**: ìë™ì§„í–‰ ë”œë ˆì´ë¥¼ 600ms â†’ 450ms (stepOnce ìµœì í™” í›„)ë¡œ ì¡°ì •

---

### 2. ìƒì§• ì‹œê°ì  í”¼ë“œë°± ê°œì„  (ì»¤ë°‹ë¨)

ì‚¬ìš©ì ìš”ì²­: "íŒ¨ì‹œë¸Œ ìƒì§• ìƒ‰ì„ í•˜ëŠ˜ìƒ‰ìœ¼ë¡œ, ëœ ë°ê²Œ í•´ì¤˜"

**íŒŒì¼**: `src/components/battle/ui/RelicDisplay.jsx`

#### ìƒì§• í•˜ì´ë¼ì´íŠ¸ ë¶„ë¥˜
```javascript
// íŒ¨ì‹œë¸Œ (ìƒì‹œ ë°œë™) - isPersistent
const isPersistent = relic.effects?.type === 'PASSIVE'
  || relic.effects?.type === 'ON_TURN_START'
  || relicId === 'bloodShackles';

// ì¼ì‹œ ë°œë™ - isActivated
const isActivated = activeEffects.some(e => e.relicId === relicId);
```

#### ìƒ‰ìƒ/ë°ê¸° ì„¤ì •ê°’

| êµ¬ë¶„ | ìƒ‰ìƒ RGB | ë°ê¸° (brightness) | ê¸€ë¡œìš° (glowIntensity) | ë°°ê²½ íˆ¬ëª…ë„ (bgOpacity) | í…Œë‘ë¦¬ íˆ¬ëª…ë„ (borderOpacity) | ê·¸ë¦¼ì ê°•ë„ (shadowIntensity) |
|------|----------|-------------------|------------------------|-------------------------|-------------------------------|-------------------------------|
| **íŒ¨ì‹œë¸Œ** | (135, 206, 235) í•˜ëŠ˜ìƒ‰ | 1.05 | 0.15 | 0.06 | 0.25 | 0.25 |
| **ì¼ì‹œ ë°œë™** | (251, 191, 36) í™©ê¸ˆìƒ‰ | 1.15 | 0.35 | 0.12 | 0.5 | 0.5 |

#### ì ìš© CSS (ë™ì  ìƒì„±)
```javascript
filter: `brightness(${brightness}) drop-shadow(0 0 4px rgba(${r}, ${g}, ${b}, ${glowIntensity}))`
background: `rgba(${r}, ${g}, ${b}, ${bgOpacity})`
border: `1px solid rgba(${r}, ${g}, ${b}, ${borderOpacity})`
boxShadow: `0 0 15px rgba(${r}, ${g}, ${b}, ${shadowIntensity})`
```

---

## ë¯¸ì»¤ë°‹ ë³€ê²½ì‚¬í•­ (ì‘ì—… ì§„í–‰ ì¤‘)

### ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ì£¼ìš” ë³€ê²½ ë‚´ìš© |
|------|---------------|
| `# ìƒíƒœì´ìƒ.MD` | ìƒíƒœì´ìƒ ì´ë¦„ ë³€ê²½ (ëŒ€ê³µì„¸â†’ê³µì„¸+, ëŒ€ìˆ˜ì„¸â†’ìˆ˜ì„¸+ ë“±) |
| `combatActions.js` | ì·¨ì•½(vulnMult) ì‹œìŠ¤í…œ ì œê±° - ì°¨ë‹¨ ì„±ê³µ ì‹œ ì·¨ì•½ ë¶€ì—¬ ë¡œì§ ì‚­ì œ |
| `battleSimulation.js` | ì·¨ì•½ ì‹œìŠ¤í…œ ì œê±° ë™ê¸°í™” |
| `HandArea.jsx` | ì¹´ë“œ ì•„ì´ì½˜ fallback ì¶”ê°€ (Sword/Shield) |
| `PlayerHpBar.jsx` | í†µì°° ë ˆë²¨ ì‹œìŠ¤í…œ (-3~+3), ìƒíƒœ íˆ´íŒ ì¶”ê°€ |
| `DevTools.jsx` | ê°œë°œì ë„êµ¬ ì´ë³€ ê´€ë ¨ ê¸°ëŠ¥ |
| `MapDemo.jsx` | ë§µ ë°ëª¨ ë³€ê²½ |
| `gameStore.js` | devForcedAnomalies, mapRisk ìƒíƒœ ì¶”ê°€ |
| `useGameState.js` | ìƒíƒœ í›… ë³€ê²½ |
| `events.js` | **ì‚­ì œë¨** - newEvents.jsë¡œ ëŒ€ì²´ |

### ì‹ ê·œ íŒŒì¼ (untracked)

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `src/components/battle/ui/AnomalyDisplay.jsx` | ì´ë³€ í‘œì‹œ UI ì»´í¬ë„ŒíŠ¸ |
| `src/data/anomalies.js` | ì´ë³€ ë°ì´í„° ì •ì˜ |
| `src/data/newEvents.js` | ìƒˆ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ ë°ì´í„° |
| `src/lib/anomalyUtils.js` | selectBattleAnomalies, applyAnomalyEffects í•¨ìˆ˜ |
| `ì´ë²¤íŠ¸.MD` | ì´ë²¤íŠ¸ ê¸°íš ë¬¸ì„œ |

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „íˆ¬ íë¦„ (LegacyBattleApp.jsx)

```
[select] ì¹´ë“œ ì„ íƒ â†’ [respond] ëŒ€ì‘ â†’ [resolve] íƒ€ì„ë¼ì¸ ì§„í–‰ â†’ [í„´ ì¢…ë£Œ]
                                              â†“
                                    stepOnce() ë°˜ë³µ í˜¸ì¶œ
                                              â†“
                                    ì‹œê³—ë°”ëŠ˜ ì´ë™ (250ms)
                                              â†“
                                    ì¹´ë“œ ë°œë™ + í”ë“¤ë¦¼ (200ms)
                                              â†“
                                    executeCardAction()
                                              â†“
                                    ìë™ì§„í–‰ ëŒ€ê¸° (450ms)
                                              â†“
                                    ë‹¤ìŒ ì¹´ë“œë¡œ...
```

### í†µì°° ë ˆë²¨ ì‹œìŠ¤í…œ

**íŒŒì¼**: `PlayerHpBar.jsx`, `LegacyBattleApp.jsx`

```javascript
// ê³„ì‚°: insight - shroud - insightPenalty (ë²”ìœ„: -3 ~ +3)
const insightLevel = Math.max(-3, Math.min(3, insight - shroud - insightPenalty));
```

| ë ˆë²¨ | ì´ë¦„ | ì´ëª¨ì§€ | ìƒ‰ìƒ | íš¨ê³¼ |
|------|------|--------|------|------|
| -3 | ë§ê° | ğŸŒ‘ | #1e293b | íƒ€ì„ë¼ì¸, ì  ì²´ë ¥/ì—í…Œë¥´ í™•ì¸ ë¶ˆê°€ |
| -2 | ë¯¸ë ¨ | ğŸŒ˜ | #475569 | ì§„í–‰ë‹¨ê³„ì—ì„œ ì  íƒ€ì„ë¼ì¸ í™•ì¸ ë¶ˆê°€ |
| -1 | ìš°ë‘” | ğŸŒ«ï¸ | #94a3b8 | ëŒ€ì‘ë‹¨ê³„ì—ì„œ ì  íƒ€ì„ë¼ì¸ í™•ì¸ ë¶ˆê°€ |
| 0 | í‰ì˜¨ | ğŸŒ• | #e2e8f0 | ì„ íƒë‹¨ê³„ì—ì„œ ì  ì¹´ë“œ 3ê°œ í™•ì¸ (ì •ë³´ ì—†ìŒ) |
| +1 | ì˜ˆì¸¡ | ğŸ”® | #c4b5fd | ì„ íƒë‹¨ê³„ì—ì„œ ì  ì¹´ë“œ 2ê°œ í™•ì¸ |
| +2 | ë…ì‹¬ | ğŸ‘ï¸ | #a78bfa | ì„ íƒë‹¨ê³„ì—ì„œ ì  ì¹´ë“œ ëª¨ë‘ í™•ì¸ |
| +3 | í˜œì•ˆ | âœ¨ | #8b5cf6 | ì  ì¹´ë“œ ëª¨ë‘ + ì¹´ë“œ ì •ë³´ í™•ì¸ |

### ì´ë³€ ì‹œìŠ¤í…œ (Anomaly)

**íŒŒì¼**: `LegacyBattleApp.jsx`, `anomalyUtils.js`, `anomalies.js`

```javascript
// ì „íˆ¬ ì‹œì‘ ì‹œ ì´ë³€ ì„ íƒ
const selectedAnomalies = selectBattleAnomalies(mapRisk, isBoss, devForcedAnomalies);

// í”Œë ˆì´ì–´ì—ê²Œ ì´ë³€ íš¨ê³¼ ì ìš©
const playerWithAnomalies = applyAnomalyEffects(selectedAnomalies, player, gameState);
```

**ì ìš©ë˜ëŠ” íŒ¨ë„í‹°ë“¤:**
- `energyPenalty`: ìµœëŒ€ í–‰ë™ë ¥ ê°ì†Œ
- `speedPenalty`: ìµœëŒ€ ì†ë„ ê°ì†Œ
- `drawPenalty`: ë“œë¡œìš° ê°ì†Œ
- `insightPenalty`: í†µì°° ë ˆë²¨ ê°ì†Œ
- `etherBan`: ì—í…Œë¥´ íšë“ ë¶ˆê°€

---

## íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ battle/
â”‚   â”‚   â”œâ”€â”€ LegacyBattleApp.jsx     # ë©”ì¸ ì „íˆ¬ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ logic/
â”‚   â”‚   â”‚   â””â”€â”€ combatActions.js    # ë°ë¯¸ì§€ ê³„ì‚°, ì¹´ë“œ íš¨ê³¼
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ TimelineDisplay.jsx # íƒ€ì„ë¼ì¸ UI, ì‹œê³—ë°”ëŠ˜
â”‚   â”‚   â”‚   â”œâ”€â”€ RelicDisplay.jsx    # ìƒì§• í‘œì‹œ
â”‚   â”‚   â”‚   â”œâ”€â”€ HandArea.jsx        # ì†íŒ¨ ì¹´ë“œ
â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerHpBar.jsx     # HPë°”, ìƒíƒœ í‘œì‹œ
â”‚   â”‚   â”‚   â”œâ”€â”€ AnomalyDisplay.jsx  # ì´ë³€ UI (ì‹ ê·œ)
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ battleUtils.js      # ì „íˆ¬ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ battleSimulation.js # ì „íˆ¬ ì‹œë®¬ë ˆì´ì…˜
â”‚   â”‚       â””â”€â”€ comboDetection.js   # ì½¤ë³´ ê°ì§€
â”‚   â”œâ”€â”€ dev/
â”‚   â”‚   â””â”€â”€ DevTools.jsx            # ê°œë°œì ë„êµ¬
â”‚   â””â”€â”€ map/
â”‚       â””â”€â”€ MapDemo.jsx             # ë§µ ë°ëª¨
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ anomalies.js                # ì´ë³€ ë°ì´í„° (ì‹ ê·œ)
â”‚   â””â”€â”€ newEvents.js                # ì´ë²¤íŠ¸ ë°ì´í„° (ì‹ ê·œ)
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ anomalyUtils.js             # ì´ë³€ ìœ í‹¸ë¦¬í‹° (ì‹ ê·œ)
â””â”€â”€ state/
    â”œâ”€â”€ gameStore.js                # Zustand ìŠ¤í† ì–´
    â””â”€â”€ useGameState.js             # ìƒíƒœ í›…
```

---

## Git ìƒíƒœ

```bash
# í˜„ì¬ ìƒíƒœ
ë¸Œëœì¹˜: claude/check-responsiveness-01WbgS136iR7Qv8ZmsANG367
ë¡œì»¬ì´ originë³´ë‹¤ 117 ì»¤ë°‹ ì•ì„œìˆìŒ

# ìµœê·¼ ì»¤ë°‹
7ffcd9e perf: íƒ€ì„ë¼ì¸ ì§„í–‰ ì†ë„ ìµœì í™” ë° ìƒì§• ì‹œê°ì  í”¼ë“œë°± ê°œì„ 
0738038 feat: í† í° ì‹œìŠ¤í…œ êµ¬í˜„ ë° ì „íˆ¬ ë¡œì§ í†µí•©
a2c8915 Refactor: Extract TraitBadge and CardStatsSidebar components
```

---

## ë¹Œë“œ ë° ì‹¤í–‰

```bash
cd "Z:\ë°”ì´ë¸Œì½”ë”©\memory bank\hahahahgo"
npm install
npm run dev
```

---

## ì£¼ì˜ì‚¬í•­ ë° ì•Œë ¤ì§„ ì´ìŠˆ

1. **íƒ€ì´ë° ë™ê¸°í™” í•„ìˆ˜**: ì‹œê³—ë°”ëŠ˜ transition(TimelineDisplay.jsx)ê³¼ ì¹´ë“œ ë°œë™ ë”œë ˆì´(LegacyBattleApp.jsx)ëŠ” ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•¨

2. **ìë™ì§„í–‰ ë”œë ˆì´ í•˜í•œì„ **: 450ms ë¯¸ë§Œìœ¼ë¡œ ì¤„ì´ë©´ ì¹´ë“œ ì‹¤í–‰ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥

3. **ì·¨ì•½ ì‹œìŠ¤í…œ ì œê±°ë¨**: vulnMult ê´€ë ¨ ì½”ë“œê°€ combatActions.jsì—ì„œ ì œê±°ë¨ (ë¯¸ì»¤ë°‹)

4. **CRLF ê²½ê³ **: Windows í™˜ê²½ LFâ†’CRLF ë³€í™˜ ê²½ê³  (ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ)

---

## ì‚¬ìš©ì ìš”ì²­ íˆìŠ¤í† ë¦¬ (í•œêµ­ì–´)

1. "ì „íˆ¬ì—ì„œ ìƒì‹œ ë°œë™í•˜ëŠ” ìƒì§•ë“¤ì˜ ë°œë™í• ë•Œ ìƒ‰ì„ ì¢€ ì˜…ì€ í•˜ëŠ˜ìƒ‰ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì–´"
2. "íŒ¨ì‹œë¸Œ íƒ€ì… ìƒì§• ë§ê³  ë‹¤ë¥¸ ìƒì§•ë“¤ì€ ê¸°ì¡´ì˜ ìƒ‰ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê²Œí•´"
3. "íŒ¨ì‹œë¸Œ íƒ€ì… ìƒì§•ë“¤ì˜ ë°ê¸° ì¢€ ëœ ë°ê²Œí•´ë´. ëˆˆì— ì˜ ì•ˆë„ê²Œ"
4. "íƒ€ì„ë¼ì¸ì—ì„œ ë‹¤ìŒ ì¹´ë“œë¡œ ë„˜ì–´ê°€ëŠ”ë° ê±¸ë¦¬ëŠ” ë”œë ˆì´ê°€ ì¢€ ê¸´ë° ë§ì´ ì¤„ì—¬ë´. ìŠ¤í”¼ë“œí•œ ê²Œì„ê°ì„ ì›í•´"
5. "ì¹´ë“œë“¤ì´ ì œëŒ€ë¡œ ë°œë™ì•ˆë¼. íƒ€ì„ë¼ì¸ìƒì—ì„œëŠ” ë‚´ ì¹´ë“œë§Œ ë°œë™ë˜ëŠ”ë° ì‹¤ì œë¡œëŠ” ëª¬ìŠ¤í„°ì¸¡ ì¹´ë“œë§Œ ë°œë™ë¼"
6. "ì´ì œ ì œëŒ€ë¡œ ë˜ê¸´ í•˜ëŠ”ë°. ë‚˜ëŠ” ì´ê²Œ ë„ˆë¬´ ëŠë¦¬ë‹¤ê³  ë´. ì–´ë–¤ ë°©ë²•ì´ ì—†ì„ê¹Œ?"
7. "ë¹ ë¥¸ë° ì‹œê³—ë°”ëŠ˜ë³´ë‹¤ ë¹ ë¥´ê²Œ ë°œë™í•˜ë„¤ í•¨ ë§ì¶°ë´"

---

**ì‘ì„±ì¼**: 2025-12-11
**ì‘ì„±ì**: Claude (Anthropic AI)
