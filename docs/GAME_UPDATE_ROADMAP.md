# 하하하GO 밸런스 및 업데이트 로드맵

**최종 업데이트**: 2025-01-03
**버전**: v1.0

---

## 현재 콘텐츠 현황

### 콘텐츠 요약
| 카테고리 | 수량 | 상태 |
|---------|------|------|
| 플레이어 카드 | 70+ | 펜싱/총기 계열 |
| 카드 특성 | 34개 | 긍정 18, 부정 14, 중립 2 |
| 적 | 10종 | Tier 1-3 |
| 적 그룹 | 19개 | 노드별 배치 |
| 상징 | 44개 | 일반/희귀/특별/전설 |
| 토큰 | 52개 | 사용/턴/반영구 |
| 이변 | 12가지 | 난이도 조절용 |

### 핵심 시스템
1. **포커 조합 + 에테르**: 조합 성공 → 에테르 획득 → 배율 증가
2. **기교(Finesse) 시스템**: 고급 카드 사용 조건
3. **타임라인 전투**: 속도 기반 카드 배치/교차
4. **통찰 레벨**: 적 정보 공개 단계 (-3 ~ +3)

---

## 1. 통계-업데이트 연계 프레임워크

### 1.1 데이터 기반 의사결정 사이클

```
┌─────────────────────────────────────────────────────────────┐
│                    업데이트 사이클                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [1. 데이터 수집]                                          │
│        ↓                                                    │
│   AI 시뮬레이션 100+ 런                                     │
│        ↓                                                    │
│   [2. 분석 프레임워크 실행]                                  │
│        ↓                                                    │
│   stats-analysis-framework.ts → 문제점 도출                 │
│        ↓                                                    │
│   [3. 가설 수립]                                            │
│        ↓                                                    │
│   "카드 X의 승률이 높은 이유는 Y 때문이다"                   │
│        ↓                                                    │
│   [4. 변경 적용]                                            │
│        ↓                                                    │
│   battleData.ts 수정                                        │
│        ↓                                                    │
│   [5. 재시뮬레이션]                                         │
│        ↓                                                    │
│   변경 전후 비교 (A/B 테스트)                               │
│        ↓                                                    │
│   [6. 검증]                                                 │
│        ↓                                                    │
│   목표 달성? → Yes: 배포 / No: 3번으로                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 업데이트 우선순위 결정 기준

통계 분석 결과에서 우선순위를 자동 산정:

```typescript
// 우선순위 점수 계산
priorityScore = (severity × 2) + (confidence × 1.5) + (playerImpact × 1)

// severity: 문제 심각도 (1-5)
// confidence: 통계적 신뢰도 (0-1)
// playerImpact: 플레이어 경험 영향도 (1-5)
```

| 우선순위 | 점수 범위 | 대응 시기 |
|---------|----------|----------|
| 긴급 | 12+ | 즉시 핫픽스 |
| 높음 | 9-11 | 다음 패치 |
| 중간 | 6-8 | 예정된 업데이트 |
| 낮음 | 3-5 | 백로그 |
| 관찰 | 0-2 | 모니터링만 |

### 1.3 통계 지표와 업데이트 영역 매핑

| 통계 지표 | 이상 징후 | 업데이트 영역 |
|----------|----------|-------------|
| 카드 승률 | Z-score > 2 | 카드 수치 조정 |
| 카드 픽률 | 4분면 분석 이탈 | 카드 매력도/접근성 |
| 적 승률 | 목표 ±10% 이상 | 적 HP/피해량 |
| 층별 사망률 | 급격한 상승 | 난이도 곡선 |
| 상징 선택률 | 편중 (>30%) | 상징 효과 조정 |
| 덱 다양성 | 지배적 아키타입 | 카드풀 확장 |

---

## 2. 밸런스 현황 분석

### 2.1 카드 밸런스 (행동력 대비 효율)

#### 행동력 1 카드 (기본)
| 카드 | 속도 | 피해/방어 | 밸류 | 특성 | 평가 |
|------|-----|----------|------|------|------|
| 사격 | 3 | 5 | 1.67 | - | 기준점 |
| 타격 | 8 | 15 | 1.88 | 연계 | 적정 |
| 페인트 | 4 | 5 | 1.25 | 연계+토큰 | 토큰 가치 고려 필요 |
| 런지 | 12 | 20 | 1.67 | 넉백 | 적정 |

#### 행동력 2 카드 (변수)
| 카드 | 속도 | 피해 | 밸류 | 평가 |
|------|-----|-----|------|------|
| 플레쉬 | 11 | 8+창조 | 창조 가치 | 복잡한 평가 필요 |
| 투셰 | 8 | 13+흔들림 | 1.63+ | 디버프 가치 |
| 비트 | 9 | 8(4×2) | 0.89 | 교차 보너스 필수 |

#### 기교 소모 카드 (고급)
| 카드 | 기교 | 속도 | 피해 | 평가 |
|------|-----|-----|------|------|
| 바이올랑 모르 | 2 | 8 | 40+처형 | 강력, 진입장벽 적절 |
| 원자탄 | 3 | 5 | 100 광역 | 최강, 기교 3 제한 적절 |
| 저격 | 1 | 6 | 20+탄걸림 | 리스크-리워드 균형 |

### 2.2 적 밸런스

#### Tier별 적 스펙
| Tier | 적 | HP | 속도 | 턴당 카드 | DPS 추정 | 평가 |
|------|-----|----|----|---------|---------|------|
| 1 | 구울 | 40 | 10 | 2 | ~10 | 입문용 적절 |
| 1 | 약탈자 | 20 | 8 | 1 | ~3 | 떼로 나올 때만 위협 |
| 1 | 들쥐 | 12 | 6 | 2 | ~5 | 잡몹 역할 |
| 1 | 폭주자 | 55 | 12 | 2 | ~14+ | 매턴 힘+1로 스케일 |
| 2 | 탈영병 | 70 | 15 | 3 | ~19 | 장막+회복으로 지구전 |
| 2 | 사냥꾼 | 85 | 14 | 2 | ~12+ | 치명타 특화 |
| 3 | 살육자 | 150 | 25 | 2 | ~22+ | 보스, 매턴 힘+1 |
| 3 | 대장 | 180 | 18 | 3 | ~27 | 보스, 소환 능력 |

#### 잠재적 문제점
1. **폭주자**: Tier 1이지만 스케일링이 강함 → 장기전에서 Tier 2급
2. **약탈자**: 너무 약함 → 4마리 그룹도 위협 부족
3. **대장 보스**: HP 180 + 소환 + 회복 → 과도하게 어려울 수 있음

### 2.3 상징 밸런스

#### 효율 분석 (추정)
| 상징 | 등급 | 효과 | 가치 평가 |
|------|-----|------|----------|
| 초인약 | 일반 | 행동력 +1 | ★★★★★ (최고) |
| 강화복 | 희귀 | 행동력 +2 | ★★★★★ (최고) |
| 채찍과 당근 | 희귀 | 민첩 +1 | ★★★★ (높음) |
| 튼튼한 갑옷 | 일반 | 매턴 방어력 8 | ★★★ (중간) |
| 에테르 수정 | 일반 | 에테르 관련 | 평가 필요 |

#### 문제점
- 행동력 증가 상징이 압도적 → 다른 상징 선택 이유 부족
- 전설 등급 미구현 → 후반 성장 곡선 부재

---

## 3. 업데이트 로드맵

### Phase 1: 기초 밸런스 조정 (단기)

#### 1.1 적 밸런스 조정
**통계 연계**: 적별 승률 데이터 기반

| 대상 | 현재 | 변경 | 근거 |
|------|-----|------|------|
| 약탈자 | HP 20, 피해 3 | HP 25, 피해 4 | 4인 그룹도 위협 부족 |
| 폭주자 | Tier 1 | Tier 1 유지, 힘 0.5/턴 | 스케일링 완화 |
| 대장 | 소환+회복+장막 | 패시브 1개 제거 | 과도한 복합 능력 |

**검증 방법**:
```
시뮬레이션 조건:
- 변경 전/후 각 50런
- 측정: 해당 적 상대 승률, 전투 턴 수, 남은 HP

성공 기준:
- 약탈자 그룹 승률: 85% → 75%
- 폭주자 전투 턴 수: 감소
- 대장 보스 승률: 난이도 3 기준 45% ±10%
```

#### 1.2 카드 미세 조정
**통계 연계**: 카드 4분면 분석 결과

| 분류 | 대상 카드 | 조정 방향 |
|------|----------|----------|
| OP (너프) | 없음 예상 | - |
| 함정 (버프) | 비트, 바인딩 | 기본 피해 +2 |
| 히든젬 (노출) | 기교 카드들 | 튜토리얼 추가 |
| 약함 (버프) | 속사 (gun) | 피해 4→5 또는 히트 2→3 |

**검증 방법**:
```
측정: 해당 카드 픽률, 승률 기여도
성공 기준: 4분면 중앙으로 이동
```

### Phase 2: 시스템 확장 (중기)

#### 2.1 난이도 시스템 정교화
**통계 연계**: 난이도별 목표 승률 vs 실제 승률

현재 난이도 구분:
```
노드 타입별: Boss(5) > Elite(4) > Dungeon(3) > Combat(2)
```

**개선안**:
```typescript
// 난이도 레벨 시스템 추가
interface DifficultyLevel {
  level: 1 | 2 | 3 | 4 | 5;
  enemyHpMult: number;      // 적 HP 배율
  enemyDamageMult: number;  // 적 피해 배율
  anomalyChance: number;    // 이변 발생 확률
  rewardMult: number;       // 보상 배율
}

const DIFFICULTY_LEVELS = {
  1: { enemyHpMult: 0.8, enemyDamageMult: 0.8, anomalyChance: 0, rewardMult: 0.8 },
  2: { enemyHpMult: 0.9, enemyDamageMult: 0.9, anomalyChance: 0.1, rewardMult: 0.9 },
  3: { enemyHpMult: 1.0, enemyDamageMult: 1.0, anomalyChance: 0.2, rewardMult: 1.0 },
  4: { enemyHpMult: 1.2, enemyDamageMult: 1.1, anomalyChance: 0.3, rewardMult: 1.2 },
  5: { enemyHpMult: 1.5, enemyDamageMult: 1.3, anomalyChance: 0.5, rewardMult: 1.5 },
};
```

**검증 방법**:
```
각 난이도 100런 시뮬레이션
목표 승률과 실제 승률 비교
허용 오차: ±10%
```

#### 2.2 상징 밸런스 개편
**통계 연계**: 상징 선택률 분포

| 문제 | 해결책 |
|------|--------|
| 행동력 상징 독점 | 행동력 +1 → +0.5 (반올림) 또는 조건부로 변경 |
| 전설 부재 | 전설 상징 4개 추가 (게임 정의적 효과) |
| 시너지 부족 | 태그 기반 시너지 시스템 도입 |

**전설 상징 후보**:
```
1. 시간의 모래시계: 첫 턴 타임라인 2배
2. 황금 총: 모든 총격 피해 +50%, 탄걸림 면역
3. 마스터의 검: 모든 검격 연계 자동 발동
4. 기원의 심장: 에테르 임계값 70으로 감소
```

#### 2.3 기교 시스템 접근성 개선
**통계 연계**: 기교 소모 카드 픽률

**문제**: 기교 획득 카드 부족 → 고급 카드 사용 기회 제한

**해결안**:
1. 시작 덱에 `전투 명상` 1장 추가
2. 연계/후속 성공 시 기교 0.5 획득 (2회에 1 기교)
3. 상점에서 기교 관련 상징 가중치 증가

### Phase 3: 콘텐츠 확장 (장기)

#### 3.1 2막 콘텐츠
| 항목 | 수량 | 설계 방향 |
|------|-----|----------|
| 신규 적 | 5종 | 1막보다 메카닉 복잡화 |
| 신규 보스 | 2종 | 페이즈 전환 + 패턴 학습 |
| 신규 카드 | 15장 | 기존 아키타입 보완 |
| 신규 상징 | 10개 | 2막 전용 시너지 |

#### 3.2 덱 아키타입 다양화
**통계 연계**: 덱 다양성 지수

현재 추정 아키타입:
- 속사 (총기 중심)
- 연계 (펜싱 콤보)
- 기교 (고급 카드 활용)

**추가 아키타입 후보**:
```
1. 방어 카운터: 방어 + 반격샷 + 카운터 중심
2. 에테르 러시: 조합 최적화로 빠른 에테르 축적
3. 디버프 컨트롤: 무딤/흔들림/화상 누적
4. 하이브리드: 검격+총격 균형
```

#### 3.3 이벤트 시스템 확장
| 이벤트 유형 | 효과 | 밸런스 고려 |
|------------|-----|------------|
| 휴식 | HP 회복 | 회복량 = 최대HP 30% |
| 상점 | 카드/상징 구매 | 가격 곡선 설계 |
| 미스터리 | 랜덤 효과 | 기대값 양수 유지 |
| 엘리트 | 강적 + 고보상 | 위험-보상 비율 |

---

## 4. 통계 기반 검증 체크리스트

### 4.1 패치 전 검증
```markdown
□ 변경 사항 명확히 정의
□ 예상 영향 범위 파악
□ 기존 시뮬레이션 데이터 백업
□ 변경 전 기준선 측정
```

### 4.2 패치 후 검증
```markdown
□ 동일 조건 재시뮬레이션 (최소 50런)
□ 핵심 지표 비교:
  - 전체 승률 변화
  - 해당 요소 관련 지표 변화
  - 의도치 않은 부작용 탐지
□ 4분면 분석으로 카드 이동 확인
□ Z-score 범위 내 안착 확인
```

### 4.3 성공/실패 판정 기준
| 결과 | 조건 | 다음 단계 |
|------|-----|----------|
| 성공 | 목표 지표 달성 + 부작용 없음 | 배포 |
| 부분 성공 | 목표 달성 but 부작용 발생 | 추가 조정 후 재검증 |
| 실패 | 목표 미달성 | 가설 재검토 |
| 롤백 필요 | 심각한 부작용 | 변경 취소 |

---

## 5. 탐구 질문 (지속적 연구)

### 밸런스 관련
1. 행동력 6 카드들의 실제 사용 빈도는? (너무 비싸서 안 쓰나?)
2. 이변 시스템이 난이도에 미치는 영향은 정량화 가능한가?
3. 포커 조합 중 어떤 조합이 가장 자주/드물게 발생하나?
4. 연계/후속 특성의 실제 발동률은?

### 플레이어 경험 관련
5. "재미있는 패배"와 "지루한 승리" 중 어느 것이 더 좋은가?
6. 의사결정 포인트가 충분한가? (자동 플레이 비중)
7. 정보 공개 수준(통찰 레벨)이 적절한가?

### 기술적 관련
8. AI 시뮬레이터가 발견 못하는 플레이어 전략은?
9. 실제 플레이어 데이터 수집 시 어떤 지표가 가장 유용할까?

---

## 6. 문서 및 도구

### 관련 문서
- `docs/BALANCE_ANALYSIS_ROADMAP.md` - 통계 분석 방법론 개선
- `src/simulator/analysis/stats-analysis-framework.ts` - 분석 프레임워크
- `src/components/battle/battleData.ts` - 카드/적 데이터

### 개발자 도구
- 시뮬레이터 탭: 대량 시뮬레이션 실행
- 분석 탭: 통계 분석 결과 확인
- 밸런스 탭: 카드/적 수치 비교

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|-----|----------|
| 2025-01-03 | v1.0 | 초안 작성 |

---

**이 로드맵은 시뮬레이션 데이터와 직접 플레이 테스트 결과에 따라 지속적으로 업데이트됩니다.**
