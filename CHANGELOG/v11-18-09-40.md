# v11-18-09:40 - 전투 UI 버튼 클릭 문제 수정 및 단축키 추가

## 작업 내용

### 1. 제출/간소화 버튼 클릭 불가 문제 수정
**문제**: 손패 영역(.hand-area)의 z-index(1000)가 제출 버튼(.submit-button-fixed, z-index: 200)보다 높아서 버튼이 클릭되지 않음

**해결**:
- `.hand-area` z-index를 1000 → 100으로 되돌림
- `.submit-button-fixed` z-index를 200 → 1001로 상향
- 이제 버튼이 정상적으로 클릭됨

**수정 파일**: `src/components/battle/legacy-battle.css`
```css
.hand-area {
  z-index: 100; /* 1000 → 100으로 되돌림 */
}

.submit-button-fixed {
  z-index: 1001; /* 200 → 1001로 상향 */
}
```

### 2. 간소화 버튼 위치 변경
**변경 전**: 제출 버튼 영역(우측 하단)에 위치
**변경 후**: 리드로우/기원 버튼 영역(중앙 상단)으로 이동

**배치 순서** (중앙 상단, 위에서 아래로):
1. 리드로우 버튼
2. **간소화 버튼 (Q)** ← 새로 추가
3. 기원 버튼

**수정 파일**: `src/components/battle/LegacyBattleApp.jsx`
- lines 1227-1242: 간소화 버튼을 리드로우/기원 버튼 영역으로 이동
- lines 1311-1316: 제출 버튼 영역에서 간소화 버튼 제거

### 3. 제출 버튼 E키 단축키 추가
**기능**: 선택 단계(select phase)에서 E키를 누르면 제출 버튼 클릭

**조건**:
- `phase === 'select'` (선택 단계만)
- `selected.length > 0` (카드가 1장 이상 선택됨)

**수정 파일**: `src/components/battle/LegacyBattleApp.jsx`
```javascript
// lines 751-766
useEffect(() => {
  const handleKeyPress = (e) => {
    // ... (기존 C키, Q키 핸들러)
    if ((e.key === "e" || e.key === "E") && phase === 'select' && selected.length > 0) {
      startResolve(); // 제출 실행
    }
  };
  window.addEventListener("keydown", handleKeyPress);
  return () => window.removeEventListener("keydown", handleKeyPress);
}, [phase, selected, startResolve]);
```

**UI 변경**: 제출 버튼 텍스트 "제출" → "제출 (E)"

### 4. 단축키 목록 정리
| 키 | 기능 | 조건 |
|---|---|---|
| **C** | 캐릭터 창 열기/닫기 | 항상 |
| **Q** | 카드 설명 간소화 ON/OFF | 선택 단계 |
| **E** | 제출 (선택한 카드 제출) | 선택 단계 + 카드 1장 이상 선택 |

## 버그 수정
- **[Critical]** 제출/간소화 버튼 클릭 불가 문제 해결
  - 원인: z-index 레이어 충돌
  - 해결: 손패 영역 z-index 하향, 버튼 영역 z-index 상향

## UI/UX 개선
- 간소화 버튼을 리드로우/기원 버튼과 같은 영역으로 이동 (시각적 일관성 향상)
- E키로 빠른 제출 가능 (게임 플레이 속도 향상)
- 버튼 텍스트에 단축키 표시 (사용자 편의성)

## 변경된 파일
1. `src/components/battle/legacy-battle.css`
   - `.hand-area` z-index 수정
   - `.submit-button-fixed` z-index 수정

2. `src/components/battle/LegacyBattleApp.jsx`
   - E키 단축키 핸들러 추가
   - 간소화 버튼 위치 이동
   - 제출 버튼 텍스트 변경

3. `src/components/map/MapDemo.jsx`
   - 버전 태그 업데이트: 11-18-09:35 → 11-18-09:40

## 테스트 가이드
1. **버튼 클릭 테스트**
   - 전투 화면 진입
   - 카드 1장 이상 선택
   - 제출 버튼 클릭 가능 여부 확인

2. **단축키 테스트**
   - Q키로 간소화 ON/OFF 확인
   - E키로 제출 실행 확인
   - C키로 캐릭터 창 열기/닫기 확인

3. **간소화 버튼 위치 확인**
   - 중앙 상단에 리드로우 - 간소화 - 기원 순서로 배치되었는지 확인
