# v11-18-11:42 - UI ê°œì„  ë° ì—í…Œë¥´ Deflation ì‹œìŠ¤í…œ êµ¬í˜„

## ì‘ì—… ë‚´ìš©

### 1. ê°„ì†Œí™” ë²„íŠ¼ ìœ„ì¹˜ ë³€ê²½
**ë³€ê²½ ì „**: ì¤‘ì•™ ìƒë‹¨ (ë¦¬ë“œë¡œìš° - ê°„ì†Œí™” - ê¸°ì› ìˆœì„œ)
**ë³€ê²½ í›„**: ì œì¶œ ë²„íŠ¼ ë°‘ (ìš°ì¸¡ í•˜ë‹¨)

**ë°°ì¹˜**:
```
ğŸ“ ì œì¶œ ë²„íŠ¼ (E)
ğŸ“ ê°„ì†Œí™” ë²„íŠ¼ (Q)  â† ì—¬ê¸°ë¡œ ì´ë™!
```

**ìˆ˜ì • íŒŒì¼**: `src/components/battle/LegacyBattleApp.jsx`
- lines 1230-1242: ì¤‘ì•™ ìƒë‹¨ì—ì„œ ê°„ì†Œí™” ë²„íŠ¼ ì œê±°
- lines 1312-1319: ì œì¶œ ë²„íŠ¼ ì˜ì—­ì— ê°„ì†Œí™” ë²„íŠ¼ ì¶”ê°€

### 2. ì§„í–‰ ë‹¨ê³„ ë²„íŠ¼ ë‹¨ì¶•í‚¤ ì¶”ê°€
**ì¶”ê°€ëœ ë‹¨ì¶•í‚¤**:
- **Aí‚¤**: í•œ ë‹¨ê³„ ë²„íŠ¼
- **Dí‚¤**: ì „ë¶€ ì‹¤í–‰ ë²„íŠ¼

**êµ¬í˜„ ë°©ì‹**: DOM í´ë¦­ ë°©ì‹ (í•¨ìˆ˜ ì´ˆê¸°í™” ì—ëŸ¬ ë°©ì§€)

**ìˆ˜ì • íŒŒì¼**: `src/components/battle/LegacyBattleApp.jsx`
```javascript
// lines 765-776: A/Dí‚¤ ë‹¨ì¶•í‚¤ í•¸ë“¤ëŸ¬
if ((e.key === "a" || e.key === "A") && phase === 'resolve') {
  const stepButton = Array.from(buttons).find(btn => btn.textContent.includes('í•œ ë‹¨ê³„'));
  if (stepButton && !stepButton.disabled) stepButton.click();
}
if ((e.key === "d" || e.key === "D") && phase === 'resolve') {
  const runAllButton = Array.from(buttons).find(btn => btn.textContent.includes('ì „ë¶€ ì‹¤í–‰'));
  if (runAllButton && !runAllButton.disabled) runAllButton.click();
}

// lines 516-521: ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
<button>í•œ ë‹¨ê³„ (A)</button>
<button>ì „ë¶€ ì‹¤í–‰ (D)</button>
```

### 3. ì—í…Œë¥´ Deflation ì‹œìŠ¤í…œ êµ¬í˜„ â­ (Major Feature)
**ê°œë…**: ê°™ì€ ì¡°í•©ì„ ë°˜ë³µí• ìˆ˜ë¡ ì—í…Œë¥´ íšë“ëŸ‰ì´ ê°ì†Œ

**ê³µì‹**:
- 1ë²ˆ ì‚¬ìš©: 100% (ê¸°ë³¸ê°’)
- 2ë²ˆ ì‚¬ìš©: 50% (0.5Â¹)
- 3ë²ˆ ì‚¬ìš©: 25% (0.5Â²)
- 4ë²ˆ ì‚¬ìš©: 12.5% (0.5Â³)
- ...
- Në²ˆ ì‚¬ìš©: 100% Ã— (0.5^(N-1))

**ìƒíƒœ ê´€ë¦¬**:
```javascript
// í”Œë ˆì´ì–´ ìƒíƒœì— comboUsageCount ì¶”ê°€
{
  hp: 30,
  etherPts: 0,
  comboUsageCount: {
    'í˜ì–´': 2,      // í˜ì–´ë¥¼ 2ë²ˆ ì‚¬ìš©
    'íŠ¸ë¦¬í”Œ': 1,    // íŠ¸ë¦¬í”Œì„ 1ë²ˆ ì‚¬ìš©
    // ...
  }
}
```

**í•µì‹¬ í•¨ìˆ˜** (`src/components/battle/LegacyBattleApp.jsx`, lines 207-214):
```javascript
function applyEtherDeflation(baseGain, comboName, comboUsageCount, deflationMultiplier = 0.5) {
  const usageCount = comboUsageCount[comboName] || 0;
  const multiplier = Math.pow(deflationMultiplier, usageCount);
  return Math.floor(baseGain * multiplier);
}
```

**ì ìš© ìœ„ì¹˜**:
1. **ì—í…Œë¥´ íšë“ ì‹œ** (lines 975-983):
   - ì§„í–‰ ì‹œì‘ ì‹œ deflation ì ìš©
   - ì‚¬ìš© íšŸìˆ˜ ì—…ë°ì´íŠ¸
   - ë¡œê·¸ì— deflation ì •ë³´ í‘œì‹œ

2. **ë¯¸ë¦¬ë³´ê¸°** (lines 856-860):
   - ì¡°í•© ì„ íƒ ì‹œ deflation ì ìš©ëœ íšë“ëŸ‰ í‘œì‹œ

**ë¡œê·¸ ì˜ˆì‹œ**:
```
âœ´ï¸ ì—í…Œë¥´ +10 (í”Œë ˆì´ì–´ ì¡±ë³´: í˜ì–´)
âœ´ï¸ ì—í…Œë¥´ +5 (í”Œë ˆì´ì–´ ì¡±ë³´: í˜ì–´) (Deflation: 10 â†’ 5)
âœ´ï¸ ì—í…Œë¥´ +2 (í”Œë ˆì´ì–´ ì¡±ë³´: í˜ì–´) (Deflation: 10 â†’ 2)
```

**í™•ì¥ì„±**:
- `deflationMultiplier` ë§¤ê°œë³€ìˆ˜ë¡œ ê°ì†Œìœ¨ ì¡°ì • ê°€ëŠ¥ (ê¸°ë³¸ê°’ 0.5)
- ì¶”í›„ ì¹´ë“œ/ì•„ì´í…œìœ¼ë¡œ deflation í•´ì œ ë˜ëŠ” ì™„í™” ê°€ëŠ¥
- ì˜ˆ: íŠ¹ìˆ˜ ì¹´ë“œë¡œ íŠ¹ì • ì¡°í•©ì˜ ì‚¬ìš© íšŸìˆ˜ ë¦¬ì…‹
- ì˜ˆ: ì•„ì´í…œìœ¼ë¡œ deflationMultiplierë¥¼ 0.7ë¡œ ì™„í™” (ê°ì†Œí­ ì¤„ì„)

## ì „ì²´ ë‹¨ì¶•í‚¤ ëª©ë¡
| í‚¤ | ê¸°ëŠ¥ | ì¡°ê±´ |
|---|---|---|
| **C** | ìºë¦­í„° ì°½ ì—´ê¸°/ë‹«ê¸° | í•­ìƒ |
| **Q** | ì¹´ë“œ ì„¤ëª… ê°„ì†Œí™” ON/OFF | ì„ íƒ ë‹¨ê³„ |
| **E** | ì œì¶œ | ì„ íƒ ë‹¨ê³„ + ì¹´ë“œ ì„ íƒë¨ |
| **A** | í•œ ë‹¨ê³„ ì‹¤í–‰ | ì§„í–‰ ë‹¨ê³„ |
| **D** | ì „ë¶€ ì‹¤í–‰ | ì§„í–‰ ë‹¨ê³„ |

## ë³€ê²½ëœ íŒŒì¼
1. `src/components/battle/LegacyBattleApp.jsx`
   - ê°„ì†Œí™” ë²„íŠ¼ ìœ„ì¹˜ ë³€ê²½
   - A/Dí‚¤ ë‹¨ì¶•í‚¤ ì¶”ê°€
   - ì—í…Œë¥´ deflation ì‹œìŠ¤í…œ êµ¬í˜„
   - í”Œë ˆì´ì–´ ìƒíƒœì— comboUsageCount ì¶”ê°€

2. `src/components/map/MapDemo.jsx`
   - ë²„ì „ íƒœê·¸: 11-18-11:15 â†’ 11-18-11:42

3. `CHANGELOG/v11-18-11-42.md`
   - ë³€ê²½ ë‚´ì—­ ê¸°ë¡

## ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### Deflation ì‹œìŠ¤í…œ ë™ì‘ íë¦„
1. **ì„ íƒ ë‹¨ê³„**: ì¡°í•© ê°ì§€ â†’ deflation ì ìš©ëœ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
2. **ì§„í–‰ ì‹œì‘**:
   - ê¸°ë³¸ íšë“ëŸ‰ ê³„ì‚°
   - í˜„ì¬ ì‚¬ìš© íšŸìˆ˜ í™•ì¸
   - Deflation ê³µì‹ ì ìš©
   - ì‹¤ì œ íšë“ëŸ‰ ì§€ê¸‰
   - ì‚¬ìš© íšŸìˆ˜ +1 ì—…ë°ì´íŠ¸
   - ë¡œê·¸ì— deflation ì •ë³´ ê¸°ë¡

### ìƒíƒœ ì´ˆê¸°í™”
- `comboUsageCount`ëŠ” ì „íˆ¬ê°€ ëë‚˜ë„ ìœ ì§€ë¨ (ì˜ë„ì  ì„¤ê³„)
- ì¶”í›„ ë§µ ì´ë²¤íŠ¸/ì•„ì´í…œìœ¼ë¡œ ë¦¬ì…‹ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„

### í™•ì¥ ê°€ëŠ¥ì„±
```javascript
// íŠ¹ìˆ˜ ì¹´ë“œ: íŠ¹ì • ì¡°í•©ì˜ deflation ë¦¬ì…‹
function resetComboDeflation(player, comboName) {
  const newUsageCount = { ...player.comboUsageCount };
  delete newUsageCount[comboName];
  return { ...player, comboUsageCount: newUsageCount };
}

// íŠ¹ìˆ˜ ì•„ì´í…œ: deflation ì™„í™”
function applyEtherDeflation(baseGain, comboName, comboUsageCount, deflationMultiplier = 0.7) {
  // 0.5 â†’ 0.7ë¡œ ë³€ê²½í•˜ë©´ ê°ì†Œí­ì´ ì¤„ì–´ë“¦
  // 1ë²ˆ: 100%, 2ë²ˆ: 70%, 3ë²ˆ: 49%, ...
}
```

## í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
1. **ê°„ì†Œí™” ë²„íŠ¼ ìœ„ì¹˜**
   - ì œì¶œ ë²„íŠ¼ ë°‘ì— ìˆëŠ”ì§€ í™•ì¸

2. **A/Dí‚¤ ë‹¨ì¶•í‚¤**
   - ì§„í–‰ ë‹¨ê³„ì—ì„œ Aí‚¤ë¡œ í•œ ë‹¨ê³„ ì‹¤í–‰
   - ì§„í–‰ ë‹¨ê³„ì—ì„œ Dí‚¤ë¡œ ì „ë¶€ ì‹¤í–‰

3. **ì—í…Œë¥´ Deflation**
   - ê°™ì€ ì¡°í•©ì„ 3ë²ˆ ì—°ì† ì‚¬ìš©
   - ë¡œê·¸ì—ì„œ íšë“ëŸ‰ ê°ì†Œ í™•ì¸:
     - 1ë²ˆ: +10
     - 2ë²ˆ: +5 (Deflation: 10 â†’ 5)
     - 3ë²ˆ: +2 (Deflation: 10 â†’ 2)
   - ë¯¸ë¦¬ë³´ê¸°ì—ì„œë„ ê°ì†Œëœ ê°’ í‘œì‹œ í™•ì¸

## ë°¸ëŸ°ìŠ¤ ì˜í–¥
- **ì´ˆë°˜**: ë‹¤ì–‘í•œ ì¡°í•© ì‚¬ìš© ìœ ë„ (ì „ëµì„± ì¦ê°€)
- **ì¤‘ë°˜**: íŠ¹ì • ì¡°í•© ë°˜ë³µ ì‹œ ìˆ˜ìµ ê°ì†Œ (ì§€ë£¨í•¨ ë°©ì§€)
- **í›„ë°˜**: Deflation í•´ì œ ì¹´ë“œ/ì•„ì´í…œìœ¼ë¡œ ì „ëµì  ì„ íƒ ì œê³µ

## Git ì •ë³´
- **ë²„ì „**: v11-18-11:42
- **ë¸Œëœì¹˜**: claude/check-responsiveness-01WbgS136iR7Qv8ZmsANG367
- **ì»¤ë°‹ ì˜ˆì •**: feat: UI ê°œì„  ë° ì—í…Œë¥´ Deflation ì‹œìŠ¤í…œ êµ¬í˜„
