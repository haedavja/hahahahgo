# v11-16-09:19 - ì œì¶œëœ ì¹´ë“œ ë‹¨ê³„ ì‚­ì œ ë° ì†íŒ¨ í†µí•©

**ë‚ ì§œ**: 2025-11-16 09:19 (KST)
**ì»¤ë°‹**: (ì»¤ë°‹ ì˜ˆì •)

## ë³€ê²½ ì‚¬í•­

### 1. ì œì¶œëœ ì¹´ë“œ ë‹¨ê³„ ì˜ì—­ ì‚­ì œ

**íŒŒì¼**: `src/components/battle/LegacyBattleApp.jsx`
- **ì§„í–‰ ë‹¨ê³„(resolve) submitted-cards-area ì‚­ì œ** (ê¸°ì¡´ 1069-1128ì¤„)
  - ì „íˆ¬ ì§„í–‰ ì¤‘ ì¹´ë“œ í‘œì‹œ ì˜ì—­ ì‚­ì œ
  - ë²„íŠ¼ë“¤(í•œ ë‹¨ê³„, ì „ë¶€ ì‹¤í–‰, í„´ ì¢…ë£Œ ë“±)ì€ ì†íŒ¨ë¡œ ì´ë™
- **ëŒ€ì‘ ë‹¨ê³„(respond) submitted-cards-area ì‚­ì œ** (ê¸°ì¡´ 1130-1192ì¤„)
  - ì œì¶œëœ ì¹´ë“œ í‘œì‹œ ì˜ì—­ ì‚­ì œ
  - ì§„í–‰ ì‹œìž‘ ë²„íŠ¼ì€ ì†íŒ¨ë¡œ ì´ë™

### 2. ì†íŒ¨ ì˜ì—­ìœ¼ë¡œ ëª¨ë“  ì¸í„°íŽ˜ì´ìŠ¤ í†µí•©

**íŒŒì¼**: `src/components/battle/LegacyBattleApp.jsx`
- **ì†íŒ¨ í‘œì‹œ ì¡°ê±´ í™•ìž¥** (1070ì¤„)
  - ê¸°ì¡´: `phase==='select' || phase==='respond' || ...`
  - ë³€ê²½: `phase==='select' || phase==='respond' || phase==='resolve' || ...`
  - ëª¨ë“  ë‹¨ê³„ì—ì„œ ì†íŒ¨ ì˜ì—­ ìœ ì§€

- **hand-combo í™•ìž¥** (1088-1102ì¤„)
  - ì„ íƒ/ëŒ€ì‘ ë‹¨ê³„: ì¡°í•© í‘œì‹œ
  - ì§„í–‰ ë‹¨ê³„: "âš”ï¸ ì „íˆ¬ ì§„í–‰ ì¤‘... (X/Y)" í‘œì‹œ

- **hand-actions í™•ìž¥** (1104-1145ì¤„)
  - ì„ íƒ ë‹¨ê³„: ë¦¬ë“œë¡œìš°, ì œì¶œ ë²„íŠ¼
  - ëŒ€ì‘ ë‹¨ê³„: ì§„í–‰ ì‹œìž‘ ë²„íŠ¼
  - ì§„í–‰ ë‹¨ê³„: í•œ ë‹¨ê³„, ì „ë¶€ ì‹¤í–‰, í„´ ì¢…ë£Œ, ë§µìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼
  - íŒ¨ë°° ì‹œ: ìž¬ì‹œìž‘ ë²„íŠ¼

- **ì†íŒ¨ ì¹´ë“œ í‘œì‹œ í™•ìž¥** (1157-1270ì¤„)
  - ì„ íƒ ë‹¨ê³„: handì—ì„œ ì¹´ë“œ ì„ íƒ
  - ëŒ€ì‘ ë‹¨ê³„: fixedOrderì˜ player ì¹´ë“œ + â†‘â†“ ìˆœì„œ ë³€ê²½ ë²„íŠ¼
  - **ì§„í–‰ ë‹¨ê³„**: queueì˜ player ì¹´ë“œ + ì‚¬ìš©ëœ ì¹´ë“œ í‘œì‹œ

### 3. í”Œë ˆì´ì–´ ì—í…Œë¥´ë°”ë¥¼ ë§¨ ì™¼ìª½ìœ¼ë¡œ ì´ë™

**íŒŒì¼**: `src/components/battle/LegacyBattleApp.jsx` (1001-1029ì¤„)
- player-panelì˜ entity-body ìˆœì„œ ë³€ê²½
  - ê¸°ì¡´: í”Œë ˆì´ì–´ ì •ë³´ â†’ EtherBar â†’ ìºë¦­í„° ì•„ì´ì½˜
  - ë³€ê²½: **EtherBar** â†’ í”Œë ˆì´ì–´ ì •ë³´ â†’ ìºë¦­í„° ì•„ì´ì½˜

## ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

### ì†íŒ¨ ì˜ì—­ êµ¬ì¡° (ëª¨ë“  ë‹¨ê³„ ê³µí†µ)
```
hand-area (position: fixed, bottom: 0)
â”œâ”€ hand-area-header
â”‚  â”œâ”€ hand-heading (ì†íŒ¨ íƒ€ì´í‹€ + ì—ë„ˆì§€)
â”‚  â”œâ”€ hand-combo (ì¡°í•© ë˜ëŠ” ì§„í–‰ ìƒíƒœ)
â”‚  â””â”€ hand-actions (ë‹¨ê³„ë³„ ë²„íŠ¼)
â””â”€ hand-cards (ë‹¨ê³„ë³„ ì¹´ë“œ í‘œì‹œ)
   â”œâ”€ select: hand ë°°ì—´ (ì„ íƒ ê°€ëŠ¥)
   â”œâ”€ respond: fixedOrder.filter(player) (ìˆœì„œ ë³€ê²½ ê°€ëŠ¥)
   â””â”€ resolve: queue.filter(player) (ì‚¬ìš© ì—¬ë¶€ í‘œì‹œ)
```

### ì§„í–‰ ë‹¨ê³„ ì¹´ë“œ í‘œì‹œ
```javascript
{queue.filter(a => a.actor === 'player').map((a,i)=>{
  const globalIndex = queue.findIndex(q => q === a);
  const isUsed = usedCardIndices.includes(globalIndex);
  const isPast = globalIndex < qIndex;
  // isPast: ì´ë¯¸ ì‹¤í–‰ëœ ì¹´ë“œëŠ” opacity-30
  // isUsed: ì‚¬ìš©ëœ ì¹´ë“œëŠ” card-used í´ëž˜ìŠ¤
})}
```

## í”Œë ˆì´ì–´ íŒ¨ë„ êµ¬ì¡° ë³€ê²½

**ì´ì „**:
```
entity-body
â”œâ”€ í”Œë ˆì´ì–´ ì •ë³´ (ì´ë¦„, HP, íƒœê·¸, ê¸°ë„ ë²„íŠ¼)
â”œâ”€ EtherBar
â””â”€ ìºë¦­í„° ì•„ì´ì½˜ (ðŸ§™â€â™‚ï¸)
```

**í˜„ìž¬**:
```
entity-body
â”œâ”€ EtherBar â† ë§¨ ì™¼ìª½
â”œâ”€ í”Œë ˆì´ì–´ ì •ë³´ (ì´ë¦„, HP, íƒœê·¸, ê¸°ë„ ë²„íŠ¼)
â””â”€ ìºë¦­í„° ì•„ì´ì½˜ (ðŸ§™â€â™‚ï¸)
```

## ì´ì „ ë²„ì „ê³¼ì˜ ì°¨ì´

**ì´ì „ ë²„ì „ (v11-16-09:13)**:
- ì§„í–‰ ë‹¨ê³„ì™€ ëŒ€ì‘ ë‹¨ê³„ì— ë³„ë„ì˜ submitted-cards-area
- ì†íŒ¨ëŠ” ì„ íƒ/ëŒ€ì‘ ë‹¨ê³„ì—ì„œë§Œ í‘œì‹œ
- í”Œë ˆì´ì–´ ì—í…Œë¥´ë°”ê°€ ì¤‘ì•™

**í˜„ìž¬ ë²„ì „**:
- ëª¨ë“  ë‹¨ê³„ì—ì„œ ì†íŒ¨ ì˜ì—­ë§Œ ì‚¬ìš© (í†µí•©)
- ì†íŒ¨ê°€ ëª¨ë“  ë‹¨ê³„(select/respond/resolve)ì—ì„œ í‘œì‹œ
- í”Œë ˆì´ì–´ ì—í…Œë¥´ë°”ê°€ ë§¨ ì™¼ìª½

## ë‹¤ìŒ AIë¥¼ ìœ„í•œ ì°¸ê³ ì‚¬í•­

1. **ì†íŒ¨ ê³ ì •**: `hand-area`ëŠ” `position: fixed, bottom: 0`ìœ¼ë¡œ í™”ë©´ í•˜ë‹¨ ê³ ì •
2. **ë‹¨ê³„ë³„ ë²„íŠ¼**: `hand-actions`ì— phaseë³„ë¡œ ì¡°ê±´ë¶€ ë Œë”ë§
3. **ì§„í–‰ ë‹¨ê³„ ì¹´ë“œ**: `queue`ì—ì„œ player ì•¡ì…˜ë§Œ í•„í„°ë§, usedCardIndicesë¡œ ì‚¬ìš© ì—¬ë¶€ ì¶”ì 
4. **ì œì¶œëœ ì¹´ë“œ ì˜ì—­ ì œê±°ë¨**: ë” ì´ìƒ ë³„ë„ì˜ submitted-cards-area ì—†ìŒ

## ë³€ê²½ íŒŒì¼ ëª©ë¡

- `src/components/battle/LegacyBattleApp.jsx`
  - ì œì¶œëœ ì¹´ë“œ ì˜ì—­ ì‚­ì œ (ì•½ 123ì¤„ ê°ì†Œ)
  - ì†íŒ¨ ì˜ì—­ í™•ìž¥ (ì•½ 50ì¤„ ì¶”ê°€)
  - í”Œë ˆì´ì–´ íŒ¨ë„ êµ¬ì¡° ë³€ê²½
- `src/components/map/MapDemo.jsx`
  - ë²„ì „ íƒœê·¸ ì—…ë°ì´íŠ¸
- `CHANGELOG/v11-16-09-19.md`
  - ìƒˆ ë²„ì „ ë¬¸ì„œ ìƒì„±
